<div class="row text-right">
  <div class="col-12">
      <a (click)="mostrarAdd()" class="nav-link btn-block" [routerLink]="">
          new
          <i class="fas fa-plus"></i>
      </a>
  </div>
</div>
<div class="row">
  <div #event *ngIf="verAdd" class="col-12">
    <form>
      <div class="form-group">
        <label for="eventName">Nombre evento</label>
        <input [(ngModel)]="nombreEvento" name="nombre" type="text" class="form-control" id="eventName" aria-describedby="emailHelp" placeholder="nombre">
      </div>

      <div class="form-row">
        <div class="col">
          <label for="eventName">Configuracion <i (click)="cofigAdd()" class="fas fa-plus"></i></label>
        </div>
      </div>

      <div #configs *ngFor="let config of eventConfigs">
        <div #configRow class="form-row">

          <!-- Tipos de configuraciones -->
          <div class="col">
            <div class="form-group">
              <select [(ngModel)]="config.tipo" class="form-control" name="tipo{{id}}">
                  <option *ngFor="let type of eventTypes" value="{{type.id_tipo}}">{{type.nombre_tipo}}</option>
                </select>
            </div>
          </div>
  
          <!-- Tipos de alerta -->
          <div class="col">
            <div class="form-group">
              <select [(ngModel)]="config.nivel" class="form-control" name="nivel{{id}}">
                  <option *ngFor="let alert of alertsTypes" value="{{alert.id_nivel}}">{{alert.nombre}}</option>
                </select>
            </div>
          </div>
  
          <!-- Operadores -->
          <div class="col-1">
            <div class="form-group">
              <select [(ngModel)]="config.operador" name="operador{{id}}" class="form-control">
                <option value=">">></option>
                <option value="<"><</option>
                <option value="=">=</option>
              </select>
            </div>
          </div>
  
          <!-- Valor a controlar -->
          <div class="col">
            <div class="form-group form-inline">
              <input [(ngModel)]="config.alerta" name="alerta{{id}}" type="text" class="form-control" id="eventConfigAlert" placeholder="Valor">
              <button (click)="removeConfig(config)" type="button" class="close" aria-label="Close" style="margin-left: 10px">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
          </div>
        </div>
      </div>

      <button (click)="addEvent(template)" type="submit" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalCenter">Save</button>
    </form>
  </div>
</div>
<hr>

<!-- Lista de eventos -->
<table class="table table-hover">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Activo</th>
      <th scope="col">Nombre Evento</th>
      <th scope="col" style="width: 300px;"></th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let event of events">
      <th scope="row">{{event.idEvento}}</th>

      <!-- Activo o desactivo -->
      <td *ngIf="!event.activo"><button type="button" class="btn btn-success" disabled></button></td>
      <td *ngIf="event.activo"><button type="button" class="btn btn-danger" disabled></button></td>

      <td>{{event.nombreEvento}}</td>

      <td >
        <!-- Activar o desactivar -->
        <button *ngIf="!event.activo" (click)="swichStatus(true, event.idEvento)" type="button" class="btn btn-outline-success">Activar</button>
        <button *ngIf="event.activo" (click)="swichStatus(false, event.idEvento)" type="button" class="btn btn-outline-danger">Desactivar</button>

        <!-- Suscribirme o desuscribirme -->
        <button *ngIf="!event.activo" (click)="swichSuscribe(true, event.idEvento)" type="button" class="btn btn-outline-success ml-1">Suscribirme</button>
        <button *ngIf="event.activo" (click)="swichSuscribe(false, event.idEvento)" type="button" class="btn btn-outline-warning ml-1">Desuscribirme</button>
      </td>
    </tr>
  </tbody>
</table>

<!-- Modal -->
<ng-template #template>
  <div class="modal-body text-center">
    <p>Do you want to confirm?</p>
    <button type="button" class="btn btn-primary" (click)="confirm()" >Yes</button> 
    <button type="button" class="btn btn-default" (click)="decline()" >No</button>
  </div>
</ng-template>